const mqtt = require('mqtt');

// กำหนดข้อมูลของ MQTT Broker
const brokerUrl = 'tcp://broker.mqtt.cool:1883';
const topic = 'topic';

// สร้าง MQTT Client
const client = mqtt.connect(brokerUrl);

// เมื่อเชื่อมต่อกับ MQTT Broker สำเร็จ
client.on('connect', () => {
    console.log('Connected to MQTT broker');

    // Subscribe ไปยัง Topic "topic"
    client.subscribe(topic, (err) => {
        if (err) {
            console.error('Error subscribing to topic:', err);
        } else {
            console.log('Subscribed to topic:', topic);
        }
    });
});

// รับข้อความจาก MQTT Broker และแสดงผลที่ Terminal
client.on('message', (topic, message) => {
    console.log('Received message from topic:', topic, 'Message:', message.toString());
});
